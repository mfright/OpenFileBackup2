package jp.ddhost.ofb_core;

import java.util.ArrayList;

public class content{
	public String source = "";	//Backup source folder.

	public String destination = "";	//Backup destination folder.

	public Boolean deletedsafe = false;	// Save deleted files or not.
	public String deleted = "";	//Folder deleted files.

	public Boolean encryption = false;	//Backup files must be zip-encrypted or not.
	public String encryptPassword = "";	//zip password.

	public Boolean disabled = false; //This backup-job will not be started if this is true.




	public ArrayList<String> excludeFilePaths = new ArrayList<String>();	//These files will not be copied.

	// Check the file is excluded to backup or not.
	public Boolean isExcluded(String filePath){
		if(excludeFilePaths.size() <1){
			return false;
		}

		for(int i=0;i<excludeFilePaths.size();i++){
			if(filePath.equals((String)excludeFilePaths.get(i))){
				return true;
			}
		}

		return false;
	}










	public String fullBuffer="";	// Full xml code in <content> element.

	public void finalizeFullBuffer(){

		// 各contentのfullBufferから各contentの各プロパティへ情報を反映
		for(int i=0;i<contents.size();i++){
			while(str != null){
				if(str.indexOf("<source>")>-1){
					loadedContent.source = str.substring(str.indexOf("<source>")+8, str.indexOf("</source>"));
				}else if(str.indexOf("<destination>")>-1){
					loadedContent.destination = str.substring(str.indexOf("<destination>")+13, str.indexOf("</destination>"));
				}else if(str.indexOf("<deleted>")>-1){
					loadedContent.deleted = str.substring(str.indexOf("<deleted>")+9, str.indexOf("</deleted>"));
				}else if(str.indexOf("<deletedsafe>true</deletedsafe>")>-1){
					loadedContent.deletedsafe = true;
				}else if(str.indexOf("<encrypt>true</encrypt>")>-1){
					loadedContent.encryption = true;
				}else if(str.indexOf("<encryptpassword>")>-1){
					loadedContent.encryptPassword = str.substring(str.indexOf("<encryptpassword>")+17, str.indexOf("</encryptpassword>"));
				}else if(str.indexOf("<exclude>")>-1){
					loadedContent.excludeFilePaths.add( str.substring(str.indexOf("<exclude>")+9, str.indexOf("</exclude>")) );
				}

				str = br.readLine();
			}
		}
	}
}